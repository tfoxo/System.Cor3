<UserControl x:Class="FeedTool.ViewMain.MainControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mah="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
             xmlns:local="clr-namespace:FeedTool"
             xmlns:mui="http://firstfloorsoftware.com/ModernUI"
             xmlns:cs="clr-namespace:CefSharp.Wpf;assembly=CefSharp.Wpf">
	<UserControl.Resources>
		<Style x:Key="DownloaderItemsTemplate" TargetType="{x:Type HeaderedItemsControl}">
			<Setter Property="Template">
				<!-- http://stackoverflow.com/questions/1667814/bind-image-source-according-to-boolean-without-a-converter -->
				<!-- http://stackoverflow.com/questions/1585462/bubbling-scroll-events-from-a-listview-to-its-parent -->
				<Setter.Value>
					<ControlTemplate TargetType="{x:Type HeaderedItemsControl}">
						<Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
							<Grid>
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto" />
									<RowDefinition Height="*" />
								</Grid.RowDefinitions>
								<ContentPresenter ContentSource="Header" Margin="9,3,0,5" />
								<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
									<ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
								</ScrollViewer>
							</Grid>
						</Border>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
		<Style x:Key="DownloaderItemsTemplate.Backup" TargetType="{x:Type HeaderedItemsControl}">
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="{x:Type HeaderedItemsControl}">
						<Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
							<Grid>
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto" />
									<RowDefinition Height="*" />
									<RowDefinition Height="12" />
								</Grid.RowDefinitions>
								<Grid>
									<Rectangle Fill="{TemplateBinding Background}" />
									<Border Background="{DynamicResource NormalBorderBrush}" CornerRadius="7,7,0,0" />
									<ContentPresenter ContentSource="Header" Margin="9,3,0,5" />
								</Grid>
								<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
									<ScrollViewer.Background>
										<LinearGradientBrush EndPoint="1,0" StartPoint="0,0">
											<GradientStop Color="#00FFFFFF" />
											<GradientStop Color="#60FFFFFF" Offset="0.4" />
											<GradientStop Color="#60FFFFFF" Offset="0.6" />
											<GradientStop Color="#00FFFFFF" Offset="1" />
										</LinearGradientBrush>
									</ScrollViewer.Background>
									<ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
								</ScrollViewer>
								<Grid Grid.Row="2">
									<Border CornerRadius="0,0,7,7">
										<Border.Background>
											<LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
												<GradientStop Color="#48CCCCCC" Offset="1" />
												<GradientStop Color="#444" />
											</LinearGradientBrush>
										</Border.Background>
									</Border>
								</Grid>
							</Grid>
						</Border>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
		<Style x:Key="DownloaderItemTemplate" TargetType="{x:Type HeaderedItemsControl}">
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="{x:Type HeaderedItemsControl}">
						<Expander SnapsToDevicePixels="true">
							<Expander.Header>
								<ContentPresenter ContentSource="Header" Margin="9,3,0,5" />
							</Expander.Header>
							<ScrollViewer Background="White" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
								<ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
							</ScrollViewer>
						</Expander>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
	</UserControl.Resources>
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="*" />
		</Grid.RowDefinitions>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="280" MinWidth="0" />
			<ColumnDefinition Width="3" />
			<ColumnDefinition Width="*" MinWidth="56" />
		</Grid.ColumnDefinitions>
		<DockPanel>
			<Menu Height="22" DockPanel.Dock="Top">
				<MenuItem Header="File">
					<MenuItem Header="Show Dev Tools" Name="showDevToolsMenuItem" Click="control_Activated" />
					<MenuItem Header="Close Dev Tools" Name="closeDevToolsMenuItem" Click="control_Activated" />
					<Separator />
					<MenuItem Header="Load S_omething" Name="menuLoadSomething" Click="Event_ClickedMenuLoadSomething" />
					<Separator />
					<MenuItem Header="Exit" Name="exitMenuItem" Click="control_Activated" />
				</MenuItem>
				<MenuItem Header="Edit">
					<MenuItem Header="Undo" Name="undoMenuItem" Click="control_Activated" />
					<MenuItem Header="Redo" Name="redoMenuItem" Click="control_Activated" />
					<Separator />
					<MenuItem Header="Cut" Name="cutMenuItem" Click="control_Activated" />
					<MenuItem Header="Copy" Name="copyMenuItem" Click="control_Activated" />
					<MenuItem Header="Paste" Name="pasteMenuItem" Click="control_Activated" />
					<MenuItem Header="Delete" Name="deleteMenuItem" Click="control_Activated" />
					<MenuItem Header="Select All" Name="selectAllMenuItem" Click="control_Activated" />
				</MenuItem>
				<MenuItem Header="View">
					<MenuItem Header="Show/Hide Scale/Opacity" Name="viewBrowserControlsMenuItem" Click="browser_viewControls" />
				</MenuItem>
				<MenuItem Header="Tests">
					<MenuItem Header="Test Resource Load Handler" Name="testResourceLoadMenuItem" Click="control_Activated" />
					<MenuItem Header="Test Scheme Load Handler" Name="testSchemeLoadMenuItem" Click="control_Activated" />
					<MenuItem Header="Test Execute JavaScript" Name="testExecuteScriptMenuItem" Click="control_Activated" />
					<MenuItem Header="Test Evaluate JavaScript" Name="testEvaluateScriptMenuItem" Click="control_Activated" />
					<MenuItem Header="Test Bind CLR Object to JavaScript" Name="testBindMenuItem" Click="control_Activated" />
					<MenuItem Header="Test Console Message" Name="testConsoleMessageMenuItem" Click="control_Activated" />
					<MenuItem Header="Test Tooltip" Name="testTooltipMenuItem" Click="control_Activated" />
					<MenuItem Header="Test Popup" Name="testPopupMenuItem" Click="control_Activated" />
					<MenuItem Header="Test Load String" Name="testLoadStringMenuItem" Click="control_Activated" />
					<MenuItem Header="Test Cookie Visitor" Name="testCookieVisitorMenuItem" Click="control_Activated" />
				</MenuItem>
			</Menu>
			<HeaderedItemsControl x:Name="listFeeds" Style="{DynamicResource DownloaderItemsTemplate}">
				<HeaderedItemsControl.ItemTemplate>
					<DataTemplate DataType="dat:MasterFeedNode">
						<Grid>
							<Border CornerRadius="1" />
							<!-- Background="Silver"-->
							<HeaderedItemsControl ItemsSource="{Binding Children}" Style="{DynamicResource DownloaderItemTemplate}">
								<HeaderedItemsControl.Header>
									<StackPanel Orientation="Horizontal">
										<Image Source="/images/appbar.folder.png" />
										<TextBlock Text="{Binding Key}" />
									</StackPanel>
								</HeaderedItemsControl.Header>
								<HeaderedItemsControl.ItemTemplate>
									<DataTemplate DataType="local:NodeInfo">
										<Grid>
											<Grid.ColumnDefinitions>
												<ColumnDefinition Width="Auto" />
												<ColumnDefinition Width="Auto" />
												<ColumnDefinition Width="*" />
											</Grid.ColumnDefinitions>
											<!-- RelativeSource={RelativeSource TemplatedParent}, -->
											<!-- local:ImageHelper.SourcePath="{Binding RelativeSource={RelativeSource TemplatedParent}}" -->
											<Image Source="/images/appbar.folder.png" />
											<Button Grid.Column="1" Content="Me"/>
											<ContentControl Grid.Column="2">
												<Hyperlink Click="Hyperlink_Click" Tag="{Binding}">
													<TextBlock Text="{Binding Name}" />
												</Hyperlink>
											</ContentControl>
										</Grid>
									</DataTemplate>
								</HeaderedItemsControl.ItemTemplate>
							</HeaderedItemsControl>
						</Grid>
					</DataTemplate>
				</HeaderedItemsControl.ItemTemplate>
			</HeaderedItemsControl>
		</DockPanel>
		<GridSplitter Grid.Column="1" HorizontalAlignment="Stretch" Grid.Row="0" />
		<DockPanel Grid.Row="0" Grid.Column="2" MinWidth="56">
			<DockPanel VerticalAlignment="Top" DockPanel.Dock="Top">
				<mui:ModernButton Height="23" Width="23" Name="backButton" IsEnabled="False" Click="control_Activated" IconData="F1 M 36,22L 36,26L 19.75,26L 27,33L 20.5,33L 11,24L 20.5,15L 27,15L 19.75,22L 36,22 Z " />
				<mui:ModernButton Height="23" Width="23" Name="forwardButton" IsEnabled="False" Click="control_Activated" IconData="F1 M 12,22L 12,26L 28.25,26L 21,33L 27.5,33L 37,24L 27.5,15L 21,15L 28.25,22L 12,22 Z " />
				<mui:ModernButton Height="23" Width="23" Name="homeButton" IsEnabled="False" Click="control_Activated" IconData="F1 M 57,42L 57,34L 32.25,34L 42.25,24L 31.75,24L 17.75,38L 31.75,52L 42.25,52L 32.25,42L 57,42 Z " />
				<mui:ModernButton Height="23" Width="23" Name="goStopButton" DockPanel.Dock="Right" IconData="F1 M 42,19.0002L 34,19.0002L 34,43.7502L 24,33.7502L 24,44.2502L 38,58.2502L 52,44.2502L 52,33.7502L 42,43.7502L 42,19.0002 Z " />
				<TextBox Height="23" Name="urlTextBox" KeyDown="urlTextBox_KeyDown" />
				<!--Youtube: F1 M 52.6345,35.4799L 52.651,35.4806L 53.0632,35.4806C 55.9679,35.4806 58.3308,37.8127 58.3308,40.6788L 58.3308,40.7092L 58.3334,40.7392C 58.5256,43.2474 58.619,45.8695 58.6112,48.5327C 58.619,51.2007 58.5256,53.8228 58.3334,56.331L 58.3308,56.3611L 58.3308,56.3914C 58.3308,59.2579 55.5721,61.5898 52.6674,61.5898L 53.0304,61.5903C 48.391,61.784 43.081,61.8775 38.0293,61.8682C 32.9745,61.8775 27.6648,61.784 23.0254,61.5903L 23.3883,61.5898C 20.4836,61.5898 17.7247,59.2579 17.7247,56.3914L 17.7247,56.3611L 17.7224,56.331C 17.5301,53.8241 17.4366,51.202 17.4445,48.5372C 17.4366,45.8691 17.53,43.247 17.7224,40.7392L 17.7247,40.7092L 17.7247,40.6788C 17.7247,37.8127 20.4836,35.4806 23.3882,35.4806L 23.0253,35.4799C 27.664,35.2862 32.974,35.1928 38.0263,35.202C 43.0818,35.1928 47.9959,35.2862 52.6345,35.4799 Z M 50.6688,47.5132C 50.6688,46.9401 50.7567,46.5294 50.9337,46.281C 51.1102,46.0331 51.4009,45.9087 51.806,45.9087C 52.1936,45.9087 52.4759,46.0331 52.6528,46.281C 52.8293,46.5294 52.9176,46.9401 52.9176,47.5132L 52.9176,48.8991L 50.6688,48.8991L 50.6688,47.5132 Z M 55.5374,51.0244L 55.5374,47.5387C 55.5374,46.2393 55.2245,45.2434 54.5997,44.5507C 53.9744,43.8579 53.0797,43.5115 51.9152,43.5115C 50.7761,43.5115 49.847,43.8857 49.1281,44.6337C 48.4085,45.3821 48.0489,46.3501 48.0489,47.5387L 48.0489,53.684C 48.0489,55.0019 48.3764,56.0373 49.0313,56.7904C 49.6864,57.5432 50.5835,57.9197 51.7226,57.9197C 52.9898,57.9197 53.9426,57.5644 54.5806,56.8543C 55.2184,56.1441 55.5374,55.0873 55.5374,53.684L 55.5374,52.6557L 52.9176,52.6557L 52.9176,53.6072C 52.9176,54.4127 52.8335,54.9338 52.6656,55.1691C 52.4976,55.4047 52.2024,55.5224 51.7805,55.5224C 51.3749,55.5224 51.0885,55.3835 50.9205,55.1047C 50.7526,54.8262 50.6688,54.3269 50.6688,53.6072L 50.6688,51.0244L 55.5374,51.0244 Z M 43.5091,54.34C 43.5091,54.7764 43.4353,55.0911 43.2887,55.2835C 43.1419,55.4757 42.9128,55.5719 42.602,55.5719L 41.9862,55.4245L 41.3837,54.9434L 41.3837,46.4112L 41.9085,45.9941L 42.4464,45.8593C 42.7916,45.8593 43.0555,45.9794 43.2368,46.2188C 43.4185,46.4582 43.5091,46.8089 43.5091,47.2708L 43.5091,54.34 Z M 43.647,43.6845C 43.2522,43.6845 42.8624,43.7934 42.4764,44.0107C 42.0908,44.2286 41.7267,44.546 41.3837,44.9638L 41.3837,38.9888L 38.8134,38.9888L 38.8134,57.549L 41.3837,57.549L 41.3837,56.4965C 41.7181,56.9133 42.0805,57.222 42.4705,57.422C 42.8603,57.622 43.3041,57.722 43.8016,57.722C 44.5557,57.722 45.1322,57.4642 45.5307,56.9475C 45.9292,56.4308 46.129,55.6858 46.129,54.7123L 46.129,47.1166C 46.129,45.9983 45.9165,45.1465 45.4921,44.5618C 45.0677,43.9771 44.4526,43.6845 43.647,43.6845 Z M 33.7844,54.2502L 32.9975,54.9873C 32.7116,55.1797 32.4753,55.2754 32.2877,55.2754C 32.0487,55.2754 31.876,55.2027 31.7694,55.0575C 31.6629,54.9123 31.6096,54.6776 31.6096,54.353L 31.6096,43.8575L 29.064,43.8575L 29.064,55.3012C 29.064,56.1163 29.2132,56.7278 29.5117,57.1356C 29.8103,57.5432 30.2539,57.7468 30.8424,57.7468C 31.3196,57.7468 31.8124,57.6008 32.3197,57.3102C 32.8274,57.019 33.3152,56.5944 33.7844,56.0376L 33.7844,57.549L 36.3299,57.549L 36.3299,43.8575L 33.7844,43.8575L 33.7844,54.2502 Z M 29.0989,38.9888L 20.3006,38.9888L 20.3006,41.6826L 23.2664,41.6826L 23.2664,57.549L 26.133,57.549L 26.133,41.6826L 29.0989,41.6826L 29.0989,38.9888 Z M 24.4274,14.4817L 27.3146,14.4817L 29.1747,21.9004L 29.3547,21.9004L 31.1283,14.4817L 34.0411,14.4817L 30.7047,25.3403L 30.7047,33.0419L 27.8379,33.0419L 27.8379,25.6871L 24.4274,14.4817 Z M 36.5309,29.8344C 36.5309,30.2114 36.6213,30.5021 36.8028,30.7076C 36.9839,30.913 37.2426,31.0152 37.5793,31.0152C 37.9245,31.0152 38.1984,30.9106 38.4015,30.701C 38.6042,30.4912 38.7057,30.2026 38.7057,29.8344L 38.7057,22.3777C 38.7057,22.0785 38.6019,21.8367 38.3949,21.653C 38.1879,21.4691 37.9161,21.3768 37.5793,21.3768C 37.2688,21.3768 37.0163,21.4691 36.8221,21.653C 36.6279,21.8367 36.5309,22.0785 36.5309,22.3777L 36.5309,29.8344 Z M 33.9112,22.4805C 33.9112,21.4201 34.2537,20.5759 34.9391,19.9473C 35.6247,19.3186 36.5455,19.0043 37.7025,19.0043C 38.756,19.0043 39.619,19.3359 40.2917,19.9986C 40.9645,20.6612 41.3008,21.5142 41.3008,22.5577L 41.3008,29.6293C 41.3008,30.8011 40.9705,31.7203 40.311,32.3872C 39.6514,33.0542 38.7432,33.3877 37.5866,33.3877C 36.473,33.3877 35.5817,33.0433 34.9137,32.3552C 34.2453,31.667 33.9112,30.7413 33.9112,29.5781L 33.9112,22.4805 Z M 50.7274,19.3503L 50.7274,33.0419L 48.1819,33.0419L 48.1819,31.5304C 47.7127,32.0873 47.2246,32.5117 46.7172,32.8029C 46.2097,33.0936 45.717,33.2396 45.2397,33.2396C 44.6513,33.2396 44.2075,33.0361 43.9091,32.6281C 43.6105,32.2206 43.4615,31.6092 43.4615,30.794L 43.4615,19.3503L 46.0071,19.3503L 46.0071,29.8457C 46.0071,30.1705 46.0604,30.4051 46.1669,30.5503C 46.2735,30.6955 46.4461,30.7683 46.6852,30.7683C 46.8728,30.7683 47.1091,30.6723 47.3949,30.4801L 48.1819,29.7429L 48.1819,19.3503L 50.7274,19.3503 Z -->
			</DockPanel>
			<HeaderedContentControl Visibility="Collapsed" Header="Advanced" Name="advancedControls" VerticalAlignment="Top" DockPanel.Dock="Top">
				<Grid>
					<Grid.RowDefinitions>
						<RowDefinition Height="Auto" />
						<RowDefinition Height="Auto" />
						<RowDefinition />
					</Grid.RowDefinitions>
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="Auto" />
						<ColumnDefinition Width="*" />
					</Grid.ColumnDefinitions>
					<Label Grid.Row="0" Grid.Column="0" Content="Angle:" />
					<Slider Grid.Row="0" Grid.Column="1" Name="angleSlider" Minimum="-180" Maximum="180" />
					<Label Grid.Row="1" Grid.Column="0" Content="Opacity:" />
					<Slider Grid.Row="1" Grid.Column="1" Name="opacitySlider" Minimum="0" Maximum="1" TickFrequency="0.01" Value="1" />
					<Label Grid.Row="2" Grid.Column="0" Content="Zoom Level:" />
					<Slider Grid.Row="2" Grid.Column="1" Name="zoomSlider" Minimum="-3" Maximum="6" TickFrequency="0.5" Value="0.0" ValueChanged="SetZoomLevel" />
				</Grid>
			</HeaderedContentControl>
			<!--GroupBox-->
			<Grid DockPanel.Dock="Bottom" Height="22">
				<ProgressBar Name="loaderProgress" Minimum="0" Maximum="1" Value="0" IsIndeterminate="False" Visibility="Visible" />
				<Label Name="outputLabel" FontFamily="Segoe UI" FontSize="11" />
			</Grid>
			<!--</ToolBar>-->
			<!-- Opacity="{Binding ElementName=opacitySlider, Path=Value}"-->
			<cs:WebView x:Name="web_view" Background="White">
				<!--<cs:WebView.LayoutTransform>
<TransformGroup>
<RotateTransform Angle="{Binding Value, ElementName=angleSlider}" />
</TransformGroup>
</cs:WebView.LayoutTransform>-->
			</cs:WebView>
		</DockPanel>
	</Grid>
</UserControl>